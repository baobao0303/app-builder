<!-- 86138ce8-062b-4e51-8058-f52374e0048d 1481abe8-8875-4241-ae86-aceb75d92ecb -->
# Tailwind Purge to Static CSS (No CDN)

## Goal

Produce `index.html + styles.css` where styles.css contains only the Tailwind utilities actually used in the canvas; HTML keeps class names but no Tailwind runtime is required.

## Steps

1) Used-class collector

- Add a helper `collectUsedClasses(html: string): Set<string>` that extracts class tokens from the final HTML (from `dz.exportHtml()`), using `extractWordsUtils`.

2) Tailwind CSS reading

- Accept a `tailwind.css` input (prebuilt) via configuration or default path.
- Read its contents at export time.

3) AST parse and filter

- Parse Tailwind CSS: `parse(tailwindCss, { source: 'tailwind.css', silent: true })`.
- Build `CssTreeWalker` with `SelectorFilter` plugin configured with the used-class set.
- Walk and prune: keep only rules where selectors match `.class` in the set; automatically remove empty rules/media with `removeEmptyRules`.

4) Stringify CSS

- Use `stringify/compress` to generate compact CSS text for the kept rules.
- Optionally append editor-generated CSS at the end (or before) to keep precedence predictable.

5) Export flow changes

- Add `CodeManagerService.downloadPurgedTailwindHtml({ html, editorCss, tailwindCss, filename })`:
- Collect used classes from `html`.
- Filter `tailwindCss` â†’ `purgedCss`.
- Combine: `finalCss = purgedCss + '\n' + editorCss`.
- Generate HTML linking to `styles.css` (no CDN).
- Download `styles.css` and `index.html` together (two downloads).

## Acceptance

- Exported `index.html` opens correctly without network access.
- Only used Tailwind utilities appear in `styles.css`.
- No Tailwind CDN/script tag present in the HTML.

### To-dos

- [ ] Implement collectUsedClasses(html) helper
- [ ] Filter Tailwind CSS with CssTreeWalker+SelectorFilter and stringify
- [ ] Add CodeManagerService API to export purged Tailwind HTML+CSS
- [ ] Wire demo export button to new purged-tailwind export API